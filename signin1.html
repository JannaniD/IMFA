<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/64d58efce2.js"
      crossorigin="anonymous"
    ></script>
    <link href="assets/img/icon1.png" rel="icon">
    <link rel="stylesheet" href="signin/signin1.css" />
    <title>IMFA - Level 1</title>
  </head>
  <body>
    <div class="container sign-in-mode">
        <div class="signin-signup">
            <div class="level1">
                <div class="position">
                  <h2 class="title">POSITION</h2>
                  <div id="box1" class="box"></div>
                  <div id="box2" class="box"></div>
                  <div id="box3" class="box"></div>
                  <div id="box4" class="box"></div>
                </div>
                <div class="value">
                  <h2 class="title">VALUES</h2>
                  <form method="get" class="digit-group" data-group-name="digits" data-autosubmit="false" autocomplete="off">
                  <input type="text" id="digit-1" name="digit-1" data-next="digit-2" />
                  <input type="text" id="digit-2" name="digit-2" data-next="digit-3" data-previous="digit-1" />
                  <input type="text" id="digit-3" name="digit-3" data-next="digit-4" data-previous="digit-2" />
                  <input type="text" id="digit-4" name="digit-4" data-next="digit-5" data-previous="digit-3" />
                  <div ><button class="btn" onclick="checkValues()">Verify</button></div>
                </div>
              </div>
        </div>

      <div class="panels-container">
        <div class="panel left-panel">
          <div class="content">
            <h3>Welcome </h3>
            <p></p>
            <h3>Level 1 - Password</h3>
            <p>
              Enter the values to the respective position to get to the next level of the IMFA
            </p>
          </div>
          <img src="assets/img/undraw_done_checking_re_6vyx.svg" class="image" alt="" />
        </div>
      </div>
    </div>
    <footer id="footer">
      <p>Integrated Multi-Factor Authentication System</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="signin/signin1.js"></script>
    <script>
      function checkVerify(){
        const url = '/verify-number';
const data = {
  randomValue: [document.getElementById("box1").innerHTML,
  document.getElementById("box2").innerHTML,
  document.getElementById("box3").innerHTML,
  document.getElementById("box4").innerHTML],
  userValue: [
  document.getElementById("digit-1").value,
  document.getElementById("digit-2").value,
  document.getElementById("digit-3").value,
  document.getElementById("digit-4").value,
  ],
};

const requestOptions = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(data),
};

fetch(url, requestOptions)
  .then(response => response.json())
  .then(data => {
    console.log('Response:', data);
    // Handle the response data
  })
  .catch(error => {
    console.error('Error:', error);
    // Handle the error
  });

      }
    </script>
    <script>
      window.onload=
        function () {
          const randomNumbers = [];

for (let i = 0; i < 4; i++) {
  const randomNumber = Math.floor(Math.random() * 11) + 1;
  randomNumbers.push(randomNumber);
}

document.getElementById("box1").innerHTML = randomNumbers[0]
document.getElementById("box2").innerHTML = randomNumbers[1]
document.getElementById("box3").innerHTML = randomNumbers[2]
document.getElementById("box4").innerHTML = randomNumbers[3]
      }
    </script>
    <script>
      $('.digit-group')
.find('input')
.each(function() {
    $(this).attr('maxlength', 1);
    $(this).on('keyup', function(e) {
        var parent = $($(this).parent());
        if(e.keyCode === 8 || e.keyCode === 37) {
            var prev = parent.find('input#' + $(this).data('previous'));
            if(prev.length) {
                $(prev).select();
            }
        } else if((e.keyCode >= 48 && e.keyCode <= 57) || (e.keyCode >= 65 && e.keyCode <= 90) || (e.keyCode >= 96 && e.keyCode <= 105) || e.keyCode === 39) {
            var next = parent.find('input#' + $(this).data('next'));
            if(next.length) {
                $(next).select();
            } else {
                if(parent.data('autosubmit')) {
                    parent.submit();
                }
            }
        }
    });
});

    </script>
  </body>
</html>
